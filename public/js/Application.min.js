if(!jQuery)throw new Error("Application Requires jQuery");var App={Init:function(){window.onerror=App.ExceptionHandler},Components:{},Library:{},ExceptionHandler:function(n,r,e,o,i){console.error("An Exception Occurred Line "+e+" : "+n)}};!function(n){App.Init()}(jQuery);
App.Config={Api:{Poll:"http://api.varzesh3.com/v0.2/poll/vote",PollList:"http://api.varzesh3.com/v0.2/poll/[PollId]",Comment:"http://api.varzesh3.com/v0.2/comment",CommentVote:"http://api.varzesh3.com/v0.2/comment/vote",CommentList:"http://api.varzesh3.com/v0.2/comment/[NewsId]/[LastCommentId]",TopPlayer:"http://api.varzesh3.com/v0.2/leaguestat/topscorers/[LeagueId]",Newspaper:"http://api.varzesh3.com/v0.2/newspaper/calendar/[Date]",NewsList:"http://api.varzesh3.com/v0.2/news/tag/[TagId]/[LastNewsId]/[Count]",LeagueStat:"http://api.varzesh3.com/v0.2/leaguestat/widget/[WidgetId]/[WeekNo]",LiveScore:"http://api.varzesh3.com/v0.2/match/events/get/[LastEventId]/[LiveTableCountry]/[VolleyballChecksum]"},Mobile:!1,Scroll:{Perfect:600,Both:600,Stage:600,Match:{Football:440,Volleyball:316},News:1980,TV:345},NewsListItemRetrieve:12,NewsListItemPerPage:6,WebSocketConnection:!0,WebSocket:{Use:!0,Port:"1234",Address:"ws.varzesh3.com"},ScoringHighlightDuration:15e3,Sound:{Default:"/static/swf/Default.swf"}};
App.Library.Modal={Config:{},Selector:function(e){return $("#modal-"+e)},Register:function(e,t){$(e).click(function(e){e.preventDefault(),App.Library.Modal.Show(t)}),App.Library.Modal.Close(t,e)},Show:function(e){var t=App.Library.Modal.Selector(e);App.Library.Modal.Clean(),$(t).addClass("show")},Hide:function(e){var t=App.Library.Modal.Selector(e);$(t).removeClass("show")},Clean:function(){$('*[id*="modal-"]').removeClass("show")},Close:function(e,t){$(App.Library.Modal.Selector(e)).find(".close").click(function(t){t.preventDefault(),App.Library.Modal.Hide(e)}),$(document).click(function(o){$(o.target).parents().andSelf().is(".wrapper")||$(o.target).is(t)||App.Library.Modal.Hide(e)})}};
App.Library.Validator={Config:{Invalid:{}},Init:function(){App.Library.Validator.Config.Invalid={}},Selector:function(t){return $("#"+t).val()},Make:function(t){App.Library.Validator.Init();for(var e in t)if(t.hasOwnProperty(e)){var r=t[e].split("|"),n=[];for(var i in r){var o=r[i].indexOf(":")>=0?r[i].split(":")[0]:r[i];if(App.Library.Validator.Rules.hasOwnProperty(o)){var a,l,p=r[i];if(p.indexOf(":")>=0){var s=p.split(":");l=App.Library.Validator.Selector(e),a=App.Library.Validator.Rules[s[0]](l,s[1])}else l=App.Library.Validator.Selector(e),a=App.Library.Validator.Rules[p](l,e);a||n.push(p)}}n.length&&(App.Library.Validator.Config.Invalid[e]=n)}},Passes:function(){var t,e=0,r=App.Library.Validator.Config.Invalid;for(t in r)r.hasOwnProperty(t)&&e++;return 0===e},Fails:function(){var t,e=0,r=App.Library.Validator.Config.Invalid;for(t in r)r.hasOwnProperty(t)&&e++;return e>0},Invalids:function(){return App.Library.Validator.Config.Invalid},Rules:{Required:function(t){return void 0===t||null===t?!1:String(t).replace(/\s/g,"").length>0},Size:function(t,e){return t?(e=parseFloat(e),"number"==typeof t?t===e:t.length===e):!0},Min:function(t,e){return void 0===t||""===t?!0:"number"==typeof t?t>=e:t.length>=e},Max:function(t,e){return void 0===t||""===t?!0:"number"==typeof t?e>=t:t.length<=e},Email:function(t){var e=new RegExp(/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return void 0===t||""===t?!0:e.test(t)},Numeric:function(t){return void 0===t||""===t?!0:!("number"!=typeof Number(t)||isNaN(Number(t))||"boolean"==typeof t)},Url:function(t){return void 0===t||""===t?!0:/^https?:\/\/\S+/.test(t)},Integer:function(t){return void 0===t||""===t?!0:!!/^\d+$/.test(String(t))},Digits:function(t,e){return this.Validate.numeric(t)&&String(t).length===parseInt(e)?!0:!1},Persian:function(t){return void 0===t||""===t?!0:/([^\x00-\xFF]\s*)/.test(t)},Alpha:function(t){return void 0===t||""===t?!0:/^[a-zA-Z]+$/.test(t)},Alpha_Dash:function(t){return void 0===t||""===t?!0:/^[a-zA-Z0-9_\-]+$/.test(t)},Alpha_Num:function(t){return void 0===t||""===t?!0:/^[a-zA-Z0-9]+$/.test(t)},In:function(t,e){if(t){for(var r=e.split(","),n=!1,i=0;i<r.length;i++)if(String(t)===r[i]){n=!0;break}return n}return!1},Not_In:function(t,e){for(var r=e.split(","),n=!0,i=0;i<r.length;i++)if(String(t)===r[i]){n=!1;break}return n},Accepted:function(t){return"on"===t||"yes"===t||1===t||"1"===t?!0:!1},Confirmed:function(t,e){return App.Library.Validator.Selector(e)===App.Library.Validator.Selector(e+"_confirmation")?!0:!1}}};
App.Library.WebSocket={Init:function(){},IsCompatible:function(){return $("html").hasClass("websockets")},Socket:null,EventTypeRepository:[],InitConnection:function(){if(!App.Library.WebSocket.IsCompatible)return!1;if(!App.Config.WebSocketConnection)return!1;if(App.Library.WebSocket.IsOpen())return!1;try{App.Library.WebSocket.Socket=new WebSocket("ws://"+App.Config.WebSocket.Address+":"+App.Config.WebSocket.Port+"/")}catch(e){return!1}App.Library.WebSocket.Socket.onopen=function(e){App.Library.WebSocket.OnOpen(e)},App.Library.WebSocket.Socket.onmessage=function(e){App.Library.WebSocket.OnMessage(e)},App.Library.WebSocket.Socket.onclose=function(e){App.Library.WebSocket.OnClose(e)},App.Library.WebSocket.Socket.onerror=function(e){App.Library.WebSocket.OnError(e)}},CloseConnection:function(){return App.Library.WebSocket.IsCompatible?void(null!=App.Library.WebSocket.Socket&&App.Library.WebSocket.Socket.close()):!1},IsOpen:function(){return null!=App.Library.WebSocket.Socket},Register:function(e,t){App.Library.WebSocket.EventTypeRepository.push({Type:e,Callback:t})},OnOpen:function(e){App.Config.UseWebSocket=!0,App.Config.WebSocketConnection=!0,console.info("WebSocket Connection Established",e)},OnMessage:function(e){try{var t=$.parseJSON(e.data);for(var r in App.Library.WebSocket.EventTypeRepository)t.Type==App.Library.WebSocket.EventTypeRepository[r].Type&&App.Library.WebSocket.EventTypeRepository[r].Callback.call(this,t)}catch(o){return!1}},OnClose:function(e){App.Config.UseWebSocket=!1,App.Config.WebSocketConnection=!1,App.Library.WebSocket.Socket=null,console.warn("WebSocket Connection Closed",e)},OnError:function(e){App.Config.UseWebSocket=!1,App.Config.UseWebSocket=!1,console.error("Error Raised",e)}};
App.Components.Layout={Init:function(){App.Components.Layout.SetConfig(),App.Components.Layout.MobileDetection(),App.Components.Layout.DefaultAndroidBrowser(),App.Components.Layout.IE(),App.Components.Layout.FastClick(),App.Components.Layout.SetClientToDesktop(),App.Components.Layout.FixedNavigation(),App.Components.Layout.FixedGoToTop(),App.Components.Layout.FloatNavigation(),App.Components.Layout.CanvasMenu(),App.Components.Layout.FastNavigation(),App.Components.Layout.AutoCloseCanvasMenu(),App.Components.Layout.RemoveAdvertisement(),App.Components.Layout.SelectOption(),App.Components.Layout.MomentJs(),App.Library.WebSocket.InitConnection(),App.Library.WebSocket.Register("time",App.Components.Layout.TimeEventHandler),App.Library.WebSocket.Register("general",App.Components.Layout.GeneralEventHandler)},SetConfig:function(){"undefined"!=typeof window.WebSocketConnection&&(App.Config.WebSocketConnection=window.WebSocketConnection)},MobileDetection:function(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(App.Config.Mobile=!0)},DefaultAndroidBrowser:function(){var e=navigator.userAgent,o=e.indexOf("Mozilla/5.0")>-1&&e.indexOf("Android ")>-1&&e.indexOf("AppleWebKit")>-1&&!(e.indexOf("Chrome")>-1);o&&$("#overlay").remove()},IE:function(){if($("body").hasClass("ie8")&&($("section.home").length||$("section.news").length)){var e=$("main.main section .container"),o=$("aside.advertisement");$("main.content").width($(e).width()-$(o).width()-10)}},FastClick:function(){new FastClick.attach(document.body)},SetClientToDesktop:function(){if(App.Config.Mobile){$("a.desktop").addClass("enabled");var e="undefined"!=typeof Cookies.get("UseDesktopView")?Cookies.get("UseDesktopView"):!1;e?($("a.desktop").html('<i class="icon-mobile"></i>'),$('meta[name="viewport"]').attr("content","width=1024, initial-scale=0, user-scalable=yes")):$("a.desktop").html('<i class="icon-screen"></i>'),$("a.desktop").click(function(e){e.preventDefault();var o=$(this).find("i").hasClass("icon-screen")?!0:!1;o?(Cookies.set("UseDesktopView",!0),$('meta[name="viewport"]').attr("content","width=1024, initial-scale=0, user-scalable=yes"),$("a.desktop").html('<i class="icon-mobile"></i>')):(Cookies.set("UseDesktopView",!1),$('meta[name="viewport"]').attr("content","initial-scale=1.0, user-scalable=no, width=device-width"),$("a.desktop").html('<i class="icon-screen"></i>')),$("html, body").animate({scrollTop:0},0)})}},FixedGoToTop:function(){$(document).scroll(function(){if($("div.wrapper").hasClass("open"))return!1;var e=$(document).scrollTop(),o=$(window).height();e>o/4?$("a.top").addClass("enabled"):$("a.top").removeClass("enabled")}),$("a.top").click(function(e){e.preventDefault(),App.Config.Mobile?($("nav.navigation").removeClass("enabled"),$("a.navigation").removeClass("active"),$("html, body").animate({scrollTop:0},0)):$("html, body").animate({scrollTop:0},1e3)})},FloatNavigation:function(){$(document).scroll(function(){if($("div.wrapper").hasClass("open"))return!1;var e=$(document).scrollTop(),o=$(window).height();e>o/4?($("a.news").addClass("enabled"),$("a.navigation").addClass("enabled")):($("a.news").removeClass("enabled"),$("a.navigation").removeClass("enabled"),$("nav.navigation").removeClass("enabled"))}),$("a.navigation").click(function(e){e.preventDefault(),$(this).toggleClass("active"),$("nav.navigation").toggleClass("enabled")}),$('nav.navigation a[class*="icon-"]').click(function(e){e.preventDefault(),$("nav.navigation").removeClass("enabled"),$("a.navigation").removeClass("active");var o=$("[id="+this.hash.slice(1)+"]");$("html,body").scrollTop(parseInt($(o).offset().top))}),$("a.float.news").click(function(e){e.preventDefault(),$("nav.navigation").removeClass("enabled"),$("a.navigation").removeClass("active"),$("body, html").scrollTop(0),$("body div.wrapper").addClass("open left"),$("a.float").removeClass("enabled"),$("#overlay").addClass("show")})},FixedNavigation:function(){var e=115;App.Config.Mobile||$(document).scroll(function(){var o=$(document).scrollTop();o>e?$("#navigation").addClass("float"):$("#navigation").removeClass("float")})},RemoveAdvertisement:function(){App.Config.Mobile&&$('[data-extension="swf"]').empty(),$("a.remove-ads").click(function(e){e.preventDefault();var o=$(this).parents("div.box")[0];$(o).find("a").attr("href",""),App.Config.Mobile?$(o).remove():$(o).find("div.advertise").empty()})},FastNavigation:function(){$(document).on("click","aside.canvas ul.menu li.fast-nav a",function(e){e.preventDefault(),App.Components.Layout.CloseCanvasMenu();var o=$("[id="+this.hash.slice(1)+"]");$("html,body").scrollTop(parseInt($(o).offset().top))})},AutoCloseCanvasMenu:function(){$(document).on("click","aside.canvas table.calendar a",function(e){App.Components.Layout.CloseCanvasMenu()})},CloseCanvasMenu:function(){return App.Config.Mobile?($("body div.wrapper").removeClass("open").removeClass("left").removeClass("right"),void $("#overlay").removeClass("show")):!1},SelectOption:function(){$(document).on("click","div.select i.icon-arrow-down6",function(e){var o=$($(this).parents("div.select")[0]).find("select");if(document.createEvent){var n=document.createEvent("MouseEvents");n.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o[0].dispatchEvent(n)}else element.fireEvent&&o[0].fireEvent("onmousedown")})},CanvasMenu:function(){$("a.off-canvas").click(function(e){$("aside.canvas").scrollTop(0);var o=$(this).find("[data-canvas]").data("canvas");$("body > .wrapper").hasClass("open")?($("body div.wrapper").removeClass("open").removeClass("left").removeClass("right"),$("#overlay").removeClass("show")):($("body div.wrapper").addClass("open").addClass(o),$("#overlay").addClass("show"))}),$("#overlay").click(function(e){App.Components.Layout.CloseCanvasMenu()})},MomentJs:function(){moment.locale("fa")},TimeEventHandler:function(e){var o=$("header .header time");$(o).html('<i class="icon-calendar"></i> '+$(o).text().trim().slice(0,-5)+e.Time)},GeneralEventHandler:function(e){"toggleWebSocket"==e.Message.InnerType&&(e.Message.Value?App.Library.WebSocket.InitConnection():App.Library.WebSocket.CloseConnection())}},function(e){App.Components.Layout.Init()}(jQuery);
